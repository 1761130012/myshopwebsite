<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.dao.GoodsDao">

    <resultMap id="joinType" type="com.example.vo.GoodsVo">
        <id property="goodsId" column="goods_id"/>
        <association property="goodsTypeVo" column="type_id"
                     select="com.example.dao.GoodsTypeDao.selectById"/>
    </resultMap>

    <!--  -->
    <select id="selectPageVo" resultMap="joinType">
        select * from goods
        <where>
            <if test="goodsVo!=null">
                <if test="goodsVo.typeId!=null">
                    <if test="goodsVo.typeId!=0">
                        and type_id = #{goodsVo.typeId}
                    </if>
                </if>
                <if test="goodsVo.name!=null">
                    and name like concat ('%',#{goodsVo.name},'%')
                </if>
            </if>
        </where>
    </select>

</mapper>
